<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
	body{background: #012;}
	*{margin:0;padding:0; list-style:none;}
	#ul1{width:336px; margin:100px auto;}
	#ul1 li{width:100px;height:100px; border:1px solid #000;margin:5px; float:left; text-align:center; font-size:40px; line-height:100px;}
	#ul1 li img{ width:100px;height:100px; background-size:100%;}
	input{width: 100px; height: 35px; background: orange; border: none; color: #fff; border-radius: 2px; cursor:pointer; font-size: 16px; font-family: '微软雅黑';}
</style>
<script src="move7.js"></script>
<script>
	window.onload = function(){
		var oUl = document.getElementById('ul1');
		var aLi = oUl.children;
		var oBtn = document.getElementById('btn');
		//布局转换 相对->绝对
		var arr = [];
		for(var i = 0;i<aLi.length;i++){
			arr.push({left:aLi[i].offsetLeft,top:aLi[i].offsetTop});
		}
		
		
		for(var i = 0;i<arr.length;i++){
			aLi[i].style.position = 'absolute';
			aLi[i].style.left = arr[i].left+'px';
			aLi[i].style.top = arr[i].top+'px';
			aLi[i].style.margin = 0;
		}
		
		
		
		oBtn.onclick = function(){
			for(var i = 0;i<aLi.length;i++){
				(function(index){
					setTimeout(function(){
						move(aLi[index],{left:0,top:0,width:0,height:0,opacity:0},{complete:function(){
							
							
							//最后一个结束 
							if(index == aLi.length-1){
								
								for(var i = aLi.length-1;i>=0;i--){
									(function(index){
										setTimeout(function(){
											
											move(aLi[index],{left:arr[index].left,top:arr[index].top,width:100,height:100,opacity:1});
											
										},100*(aLi.length-1-i));
										
									})(i);
									
								}
							}
							//最后一个结束 
							
						}});
					},i*100);
				})(i);
			}	
		};
	};
</script>
</head>

<body>
	<input type="button" value="一键收回" id="btn">
    <ul id="ul1">
    	<li>
        	<img src="img/1.jpg" />
        </li>
    	<li>
        	<img src="img/2.jpg" />
        </li>
    	<li>
        	<img src="img/3.jpg" />
        </li>
    	<li>
        	<img src="img/4.jpg" />
        </li>
    	<li>
        	<img src="img/5.jpg" />
        </li>
    	<li>
        	<img src="img/6.jpg" />
        </li>
    	<li>
        	<img src="img/7.jpg" />
        </li>
    	<li>
        	<img src="img/8.jpg" />
        </li>
    	<li>
        	<img src="img/9.jpg" />
        </li>
    </ul>
</body>
</html>















